\documentclass[a4paper,12pt]{article}
    \author{
        Randy Henry \\ 
        \href{mailto:pivotsallit@gmail.com}
        {{\small \texttt{pivotsallit@gmail.com}}}}
    \title{Lang Syntax Reference}

    % \usepackage{syntonly}
    % \syntaxonly % for debugging; comment this out

    \usepackage{url}
    \usepackage{hyperref}
    \usepackage{listings}
    \usepackage{xcolor}

    \lstset{
        language=Haskell,
        basicstyle=\footnotesize\ttfamily,
        keepspaces=true,
        tabsize=4,
        morekeywords={
            Nat,
            println
        }
    }

    \newcommand{\code}{\lstinline}
    
    \newcommand{\br}{\\ [0.5em] \hline \\ [-0.5em]}

    \newenvironment{data}
    {
        \begin{center}
        \begin{tabular*}{\textwidth}{ l@{\extracolsep{\fill}}l }
    }
    {
        \end{tabular*}
        \end{center}
    }

%----------------------------------------------------------------------------%
%----------------------------------------------------------------------------%
%----------------------------------------------------------------------------%

\begin{document}
\maketitle
\tableofcontents

\newpage

\section{Introduction}
    This paper walks through the "Syntax Across Languages" \cite{SAL}
    page, describing how each phenomenon it references would be translated
    into valid \textsc{Lang} syntax.

    This is meant not as an introductory guide to \textsc{Lang}, but as a sort 
    of formal reference for how common design patterns would appear 
    in \textsc{Lang} code out in the wild.


\section{Miscellaneous} 
\subsection{Commenting}
    \begin{data}
        Until end of line & 
            \code|-- This is a comment.| \br
        Nestable          & 
            \code$--/ This is a comment. /--$
    \end{data}

\subsection{Documentation comment}
    \begin{data}
        Until end of line & 
            \code|-- This is a comment.| \br
        Nestable          & 
            \code$--| This is a comment. |--$
    \end{data}

\subsection{Tokens}
    \begin{data}
        Case-sensitive       & 
            \code|x =/= X.| \br
        kebab-case-variables & 
            \code|avogadro's-number := 6.022e23.| \br
        Upper-Kebab-Types    & 
            \code|type 2D-Point := { x: Z, y: Z. }.|
    \end{data}
    
\subsection{Variable assignment/declaration}
    \begin{data}
        Declaration        & 
            \begin{lstlisting}[mathescape=true]
-- separate type annotation
a: Nat. 
a := 3.

-- together
b: Int := -4. 

-- inferred
$\tau$ := 2 * $\pi$. 
            \end{lstlisting} \br
        Assignment         & 
            \begin{lstlisting}
x :- 3. -- mutable
x :- x + 2. 
            \end{lstlisting} \br
        Scoped Declaration & 
            \code|let x := expr in { ... }.|
    \end{data}

\subsection{Grouping}
    \begin{data}
        Expressions       & 
            \code|empty? (filter even? xs)| \br
        Statements & 
            \begin{lstlisting}
-- explicit (brace style)
x := { 
    y := 3, 
    println "if then else expr",
    if { z := y + 2, z < 6. }
    then { y. } 
    else { (y * 3) + 2. }.
}.

-- implicit (indentation style)
x :=
    y := 3,
    println "if then else expr",
    if z := y + 2, z < 6 
    then y
    else (y * 3) + 2.
            \end{lstlisting}
    \end{data}

\subsection{Comparisons}
\begin{data}
    Deep Equality  & 
        \code[mathescape=true]
        |$\pi$ = $\tau$ / 2, 3 =/= 4.|       \br
    Comparison     &
        \code|x > y, y < x. a <= b, b >= a.| \br
    Ordering (inferior, equal, or superior) &
        \code|compare "abc" "bac". -- LT|    \br
    Extreme values &
        \code|min [1, 2, 3], max 1 2 3.|
\end{data}


\section{Functions}
\subsection{Function calls}
\begin{data}
    Parametrized  &
        \code|f a b| \br
    No parameters &
        \code|f|     \br
    Partial application (given 1\textsuperscript{st}) &
        \code|map filter(even?) xs| \br
    \textcolor{white}{
    Partial application} (given 2\textsuperscript{nd}) &
        \code|map filter(,xs) [even?, divisible-by-3?]| \br
\end{data}

% TODO: add more stuff

%----------------------------------------------------------------------------%
%----------------------------------------------------------------------------%
%----------------------------------------------------------------------------%

\newpage
\bibliographystyle{apalike}
\bibliography{syntax}
\end{document}
